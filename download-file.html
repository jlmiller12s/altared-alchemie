<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Download Devdoc Voice Generator ‚Äî Altared Alchemie</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-neutral-950 text-white min-h-screen flex items-center justify-center">
  <div class="max-w-2xl mx-auto px-6 text-center">
    <h1 class="text-4xl font-bold mb-4">üéâ Thank You for Your Purchase!</h1>
    
    <div class="my-8 p-6 rounded-xl bg-white/[0.02] border border-white/10">
      <h2 class="text-2xl font-semibold mb-4">Download Devdoc Voice Generator</h2>
      
      <div id="download-section" class="space-y-4">
        <p class="text-white/70">Your download will begin automatically...</p>
        <div class="animate-pulse">‚¨áÔ∏è</div>
      </div>
      
      <div id="license-key-section" class="mt-6 p-4 bg-red-600/20 border border-red-600/40 rounded-lg">
        <p class="text-sm text-white/60 mb-2">Your License Key:</p>
        <p id="license-key" class="text-2xl font-mono font-bold">XXXX-XXXX-XXXX-XXXX</p>
        <p class="text-xs text-white/50 mt-2">Save this key - you'll need it to activate the app</p>
      </div>
      
      <div class="mt-8">
        <a href="#" id="manual-download" class="inline-block px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-semibold">
          Click here if download doesn't start
        </a>
      </div>
    </div>
    
    <div class="text-sm text-white/60">
      <p>Need help? Email us at support@altaredalchemie.com</p>
    </div>
  </div>

  <script>
    // Get session ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const sessionId = urlParams.get('session_id');
    
    if (sessionId) {
      // Verify session and get download link
      fetch(`/api/get-download?session_id=${sessionId}`)
        .then(res => res.json())
        .then(data => {
          if (data.downloadUrl) {
            // Start automatic download
            window.location.href = data.downloadUrl;
            
            // Update manual download link
            document.getElementById('manual-download').href = data.downloadUrl;
            
            // Display license key
            if (data.licenseKey) {
              document.getElementById('license-key').textContent = data.licenseKey;
            }
          }
        })
        .catch(err => {
          console.error('Error fetching download:', err);
          document.getElementById('download-section').innerHTML = 
            '<p class="text-red-500">Error loading download. Please check your email for the download link.</p>';
        });
    }
  </script>
</body>
</html>

